# 成员函数的调用

从上图可以看出，成员函数最终被编译成与对象无关的普通函数，如果函数体中没有成员变量，那问题就很简单，不用对函数做任何处理，直接调用即可。

如果成员函数中使用到了成员变量，该怎么办呢？成员变量的作用域不是全局，不经任何处理就无法在函数内部访问。

C++规定，编译成员函数时要额外添加一个形参this，在调用成员函数时，把当前对象的地址传递给this指针，通过指针来访问成员函数中用到的成员变量。不过this这个形参时隐式的，它并不出现在代码中，而是在编译阶段由编译器默默的将它添加到参数列表中。

假设 Demo 类有两个 int 型的成员变量，分别是 a 和 b，并且在成员函数 display() 中使用到了，如下所示：
```C++
    void Demo::display(){
        cout<<a<<endl;
        cout<<b<<endl; 
```

那么编译后的形式类似于：
```C++
    void new_function_name(const Demo *p){
        //通过指针p来访问a、b
        cout<<p->a<<endl;
        cout<<p->b<<endl;
    }
```

调用时的形式类似于：

new_function_name(&obj);

这样就完成了对象和成员函数的关联，只不过与我们从表明上看到的相反，不是通过对象找函数，而是通过函数找对象。

这一切都是隐式完成的，对程序员来说完全透明，就好像这个额外的参数不存在一样。

总结：C++ 类中，成员函数最终被编译成与对象无关的普通函数，除了成员变量，会丢失所有信息，所以在编译时会添加一个额外的参数，把当前对象的首地址传入，以此来关联成员函数和成员变量。这个额外的参数，实际上就是 this，它是成员函数和成员变量关联的桥梁。

作者：零岁的我
链接：https://www.jianshu.com/p/396ccf81c61d
来源：简书
